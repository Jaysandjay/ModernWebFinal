<%- include('partials/header', { title: 'All Movies' }) %>

<h1 class="section-title">Your Movies</h1>

<% if (message) { %>
  <div class="message-box"><%= message %></div>
<% } %>

<% if (error) { %>
  <ul class="errors">
    <li><%= error %></li>
  </ul>
<% } %>

<% if (movielist && movielist.length > 0) { %>
  <div class="table-wrapper">
    <table class="movie-table">
      <thead>
        <tr>
          <th>Name</th>
          <th>Year</th>
          <th>Genre</th>
          <th>Rating</th>
          <th>Music</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <% movielist.forEach(function(m) { %>
          <tr>
            <td><%= m.name %></td>
            <td><%= m.year %></td>
            <td><%= m.genre %></td>
            <td><%= m.rating %></td>
            <td><%= m.music %></td>
            <td>
              <form action="/update/<%= m._id %>" method="get" style="display:inline;">
                <button type="submit" class="btn btn-ghost" style="font-size:0.75rem;">Edit</button>
              </form>
              <form action="/delete/<%= m._id %>" method="post" style="display:inline;" onsubmit="return confirm('Delete this movie?');">
                <button type="submit" class="btn btn-primary" style="font-size:0.75rem;">Delete</button>
              </form>
            </td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  </div>
<% } else { %>
  <p style="margin-top:16px; color:#cfcfff;">No movies yet. Be the first to <a href="/insert" style="color:#00f5ff;">add one</a> âœ¨</p>
<% } %>

<%- include('partials/footer') %>
